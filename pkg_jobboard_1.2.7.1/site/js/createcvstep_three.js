
/**
  @package JobBoard
  @copyright Copyright (c)2010-2013 Figomago <http://figomago.wordpress.com>
  @license : GNU General Public License v3 or later
----------------------------------------------------------------------- */

var lastSkillNum;var skillRowContent="";var skillrow=[];var yearOptions="";Element.extend({fade:function(d,c,b,a){new Fx.Style(this,"opacity",{duration:b,onComplete:function(){if(a){this.element.remove()}}}).start(d,c)}});window.addEvent("domready",function(){var a=new Fx.Scroll(this,{wait:false,duration:350,transition:Fx.Transitions.Quart.easeInOut});if($("newskill")){checkNumskills();$("newskill").addEvent("click",function(g){g=new Event(g).stop();if(jbVars.skillNum==(jbVars.maxSkills-1)){this.setStyle("visibility","hidden")}if(jbVars.skillNum>(jbVars.maxSkills-1)){return}lastSkillNum=jbVars.skillNum;jbVars.skillNum+=1;for(y=0;y<18;y++){var b=jbVars.currYear-y;yearOptions+='<option value="'+b+'">'+b+"</option>\n"}skillRowContent='<span class="skillname"><input type="text" name="skillname['+jbVars.skillNum+']" value="" /></span><span class="skilllastuse"><select  name="lastused['+jbVars.skillNum+']"><option value="0">'+jbVars.txtCurrent+"</option>"+yearOptions+'</select></span><span class="skillexpperiod"><input type="text" name="experience['+jbVars.skillNum+']" value="" /></span><span class="skillbtns"><a id="remove-'+jbVars.skillNum+'" href="#">'+jbVars.txtRemoveSkill+"</a></span>";var c="skillrow-"+lastSkillNum;var f=$$("div.skillwrapper");var j=f[f.length-1];var h=j.getPosition().y;var d=j.getSize().y;var k=new Element("div",{id:"skillrow-"+jbVars.skillNum,"class":"skillwrapper"}).set("html",skillRowContent).injectAfter(j).set("opacity",0.3);a.start(0,0.8*h+d).chain(function(){k.set("opacity",1)});var i=k.getElement('span[class="skillbtns"]');i.getElement("a").addEvents({mousedown:function(){g=new Event(g).stop();this.getParent("div").set("opacity",0.6)},mouseup:function(l){l=new Event(l).stop();this.getParent("div").set("opacity",1)},click:function(l){l=new Event(l).stop();this.getParent("div").destroy();jbVars.skillNum--;a.toElement(j);checkNumskills()}});checkNumskills()})}});var checkNumskills=function(){var c=$$("div.skillwrapper");var b=c[0].getElement('span[class="skillbtns"]');var d=b.getElement("a");var a=c.length;if(a!==1){if(d){d.setStyle("display","block");d.addEvents({mousedown:function(f){f=new Event(f).stop();this.getParent("div").set("opacity",0.6)},mouseup:function(f){f=new Event(f).stop();this.getParent("div").set("opacity",1)},click:function(f){f=new Event(f).stop();this.getParent("div").destroy();jbVars.skillNum--;winScroll.toElement(skillTargEl);checkNumskills()}});$("skillscount").setAttribute("value",a)}}else{d.setStyle("display","none");d.removeEvent("click");$("skillscount").setAttribute("value",a)}if(a!=jbVars.maxSkills){$("newskill").setStyle("visibility","visible")}};