
/**
  @package JobBoard
  @copyright Copyright (c)2010-2013 Figomago <http://figomago.wordpress.com>
  @license : GNU General Public License v3 or later
----------------------------------------------------------------------- */

var lastFilelNum;var fileRowContent="";var filerow=[];Element.extend({fade:function(d,c,b,a){new Fx.Style(this,"opacity",{duration:b,onComplete:function(){if(a){this.element.remove()}}}).start(d,c)}});window.addEvent("domready",function(){var a=new Fx.Scroll(this,{wait:false,duration:350,transition:Fx.Transitions.Quart.easeInOut});$("newfile").addEvent("click",function(h){h=new Event(h).stop();if(jbVars.fileNum==(jbVars.maxFiles-1)){$("newfile").setStyle("visibility","hidden")}if(jbVars.fileNum>(jbVars.maxFiles-1)){return}lastfileNum=jbVars.fileNum;jbVars.fileNum+=1;fileRowContent="<label>"+jbVars.txtTitle+'</label><input type="text" size="55" name="filetitle['+jbVars.fileNum+']" /><label class="midlabel">'+jbVars.txtUplfile+'</label><a class="btn" href="#">'+jbVars.txtRemove+'</a><input class="inputfield " name="file['+jbVars.fileNum+']" type="file" />';var c="filerow-"+lastfileNum;var g=$("jbcontent").getElement("div[id="+c+"]");var f=g.getPosition().y;var b=g.getSize().y;var d=new Element("div",{id:"filerow-"+jbVars.fileNum,"class":"filerow"}).set("html",fileRowContent).injectAfter(g).set("opacity",0.2);d.getElement("a").addEvents({mousedown:function(){h=new Event(h).stop();this.getParent("div").set("opacity",0.6)},mouseup:function(i){i=new Event(i).stop();this.getParent("div").set("opacity",1)},click:function(i){i=new Event(i).stop();this.getParent("div").destroy();jbVars.fileNum--;a.toElement("filesInfo");checkNumRows(true)}});a.toElement("filerow-"+jbVars.fileNum).chain(function(){d.set("opacity",1)});checkNumRows(false)});if($("btn-li-import")){$("btn-li-import").addEvent("click",function(f){f=new Event(f).stop();var d=this.getAttribute("href");var b=this.getParent("div").set("html","");var c=new Element("h2",{id:"li-process"}).set("html",jbVars.txtLiImport).inject(b);window.location.href=d})}});var checkNumRows=function(d){var f=$$("div.filerow");var b=f.length;var a=jbVars.maxFiles;if(b<a){$("newfile").setStyle("visibility","visible")}$("file_count").setAttribute("value",b);if(d==false){if(b==1||b<3){return}else{var c;var e;for(es=2;es<b;es++){c=f[es-1];e=c.getElement("a");if(es<b){e.setStyle("visibility","hidden");e.removeEvent("click");$("file_count").setAttribute("value",b)}else{e.setStyle("visibility","visible");e.addEvents({mousedown:function(g){g=new Event(g).stop();this.getParent("div").set("opacity",0.6)},mouseup:function(g){g=new Event(g).stop();this.getParent("div").set("opacity",1)},click:function(g){g=new Event(g).stop();this.getParent("div").destroy()}});$("file_count").setAttribute("value",b)}}}}else{if(b==1){return}var c;var e;c=f[b-1];if(!c){return}e=c.getElement("a");if(es<b){e.setStyle("visibility","hidden");e.removeEvent("click");$("file_count").setAttribute("value",b)}else{e.setStyle("visibility","visible");e.addEvent("click",function(){this.getParent("div").set("opacity",0.4).destroy()});$("file_count").setAttribute("value",b)}}};